# CCPC 2017 Qinhuangdao Site

突然发现我可以用 `\lceil` 和 `\rfloor` 打出 $\lceil$直引号$\rfloor$，跟真正的「直引号」差不多。

## Balloon Robot

大概是类似这样的式子

$$
\min_k\sum_{i=1}^p (k-s_{a_i}-b_i)\bmod m
$$

然后枚举 $k$ 在哪个区间即可。

## Expected Waiting Time

注意到一个括号序列的期望贡献直接就是右括号的权值和减去左括号的权值和。

考虑 $i$ 与 $j$ 匹配的贡献即为 $C_{j-i-1}C_{n-(j-i)}(a_j-a_i)$，考虑对于每个 $k=j-i$ 算出 $\sum (a_j-a_i)$ 然后就做完了。

## Crusaders Quest

直接 $3!$ 暴力枚举即可

## Graph Generator

考虑最后一个点必然满足，拆掉他之后，不存在一个连通块内既有他的邻域，又有不是他的邻域的点。

注意到与他不相连的点必然与其不在一个连通块，所以合法等价于这个点连向这个连通块内的所有其余点。

我们按照度数排序依次拆即可。

## String of CCPC

最多买 $O(1)$ 次，所以直接用类似 KMP 的方法 DP 即可。

## Getting Lost

$n\le 2$……这怎么做都行吧

甚至可以直接分讨相对位置关系。

## Numbers

答案是 $\lceil n/m\rceil$，剩下的几个可以全部填 $0$。

剩下就是罪恶的高精度了。

## Prime Set

考虑忽略质数的条件，问题就是选出 $k$ 条边使覆盖的点的数量尽量大。

这是一个 NP-hard 问题，~~我们挑战 NPC 即可~~，我们做不了。

考虑图的性质。

我们不妨假设至多只有一个 $a_i=1$，则合法的连边满足 $a_i$ 和 $a_j$ 的奇偶性不同，这是因为 $>2$ 的质数都是奇数。

显然这是一个二分图，而二分图最大点覆盖是简单的。

现在考虑 $a_i=1$，发现形如一个团，可以特殊判断。

## Triangulation

可以发现问题不弱于[最小权重三角剖分(Minimum-weight triangulation)](https://en.wikipedia.org/wiki/Minimum-weight_triangulation)，一个经典的 NP-hard 问题。为什么呢？因为给出的图形不一定是凸的，它的剖分就很怪。

考虑预处理所有的合法三角形，然后记忆化搜索，复杂度就是对的。

## Tree Equation

让我们来考虑**深度**和**子树大小**这两个容易刻画的条件。

让我们来考虑一个简化的问题：如何找到 $X$ 满足 $A\cdot X=B$。

注意到 $B$ 中最深的点对应 $A$ 中最深的点，进一步的，记 $h$ 表示树的高度，则 $h(A)+h(X)=h(B)$。

我们找到 $B$ 中最深的点，然后向上跳 $h(B)-h(A)$ 步，这个子树即为 $X$。

然后收缩判断。从根开始，每次删掉一个 $X$，对于剩余儿子递归进入即可。

回到原问题，我们知道 $h(C)=\max(h(A)+h(X),h(B)+h(Y))$，不妨假设 $h(C)=h(A)+h(X)$，则可以找到 $C$ 中最深点往上跳 $h(C)-h(A)$ 步即得到 $X$。

对于每个点，我们判断其能否删掉 $X$，然后在能删掉 $X$ 的点中做 $A$ 的树同构，然后做 $C-A\cdot X=B\cdot Y$ 的拆解即可，由于 $C-A\cdot X$ 是唯一的，所以这是对的。

## Diversity and Variance

贪心地从中间开始删即可，不难发现删掉一个区间不会更劣，所以就枚举这个区间即可。

## One-Dimensional Maze

显然要么把 $2\sim m$ 改为 `L`，要么把 $m\sim n-1$ 改为 `R`。

## Safest Buildings

？？？这个不是直接就能算出对于每个建筑合法的原点，然后排个序就做完了吗？为什么数据范围这么小

