## @Beijing Day1

CCO

### 0417 t1

怎么是蓝题

首先我们是知道峰的位置的，更进一步地，我们知道每个位置将要变成什么。

注意到从小到大操作一定是最优的，对于等大的位置，一定是先操作左边和右边的，然后用左边和右边来操作中间的。

这里我们需要求出「区间 $>$ 某个元素的最小值」，不难用主席树维护。

### 0417 t2

经典做法是：二分答案，如果两个圆相交就连一条边；特别的，对于 $y=0$ 和 $y=y_0$ 也视作一个半径为无穷大的圆，然后我们只用判断这两个点是否连通即可。

有修改怎么做？考虑线段树分治，然后就做完了

### 0417 t3

没看懂

## @Beijing Day2

### 0418 t1

题目写的取反吓我一跳，其实是「取相反数」的意思。

考虑 $|h_i|=1$。

此时一次操作相当于给两个相邻相同数取反。

判断每个连续段是否都是偶数，如果不是则无解；否则枚举一段前缀全部变成 $-1$，剩下全部变成 $1$ 即可。

考虑 $|h_i|\le 1$，怎样把这个问题化归到上面的问题？

考虑提取出所有的 $0$，仍然枚举一段前缀，那么 $0$ 一定得是跑到中间的，而中间犁过的地方会取反一次，不难扫描维护。

考虑 $|h_i|$ 互不相同。

我们不妨借鉴上面「先处理两端再处理中间」的想法，因为两端是比较固定的。

我们不妨仍然枚举 $0$ 分割线所在位置。

考虑先填中间

后面不会做了

---

这里是看了题解的我

草，部分分跟正解一点关系都没有

考虑奇偶分组，我们不妨对所有偶数位视作取反，那么一次操作就是简单的交换。虽然见过类似的 trick 但是完全没想到。

然后我们的要求变为

- 对所有奇数位 $i$，$a_i+a_{i+1}\le 0$
- 对所有偶数位 $i$，$a_i+a_{i+1}\ge 0$

这个变换让我们不必考虑交换给元素带来的影响。

从变换前的结论，我们知道首先要求绝对值先减少再增大，且符号大约正负交替。

如果我们在此时枚举 $0$ 的位置，会给我们带来什么？

仍然是，对于左边，要求

- 对所有奇数位，$a_i\le -a_{i+1}$
- 对所有偶数位，$a_i\ge -a_{i+1}$

右边类似。

你注意到，中间其实比两边更「固定」。

比如 $0$ 只能填在中间，但是 $1$ 就得在两边挑位置。

所以我们不妨按绝对值大小排序之后从小到大依次放入。

但是这样会有一个问题：如何计算贡献？

如果我们知道每个元素的起点和终点，我们发现贡献就是相交的线段的个数。

不会，怎么加麻大的题这么困难

### 0418 t2

似曾相识。

首先注意到给出的 $a$ 基本是连续的，相邻两项至多相差 $1$。

如果相邻两项不同 $a_i\ne a_{i+1}$，那么我们其实已经确定了 $s_i$ 跟 $s_{i+k}$。

否则，我们将要求 $s_i=s_{i+k}$。

我们给 $i$ 和 $i+k$ 连一条边，然后数可以自由选择的连通块数量就做完了。

并非做完，我们还要求 $\sum_{i=1}^ks_i=a_1$，不难发现只要满足这个条件后面都是合法的。

所以答案就是一个组合数。

### 0418 t3

考虑没有修改怎么做。

对于每种贝壳，容斥一下看看能贡献到哪些矩形，不难发现是一个二维偏序问题，可以预处理出来。

对所有矩形按照价值排序，每次 lower_bound 一下即可。

但是有修改，每次删掉若干矩形。

你发现我们每次暴力删掉均摊复杂度是对的，然后就做完了。

## @Beijing Day3

变成 CEOI 了

### How to Avoid Disqualification in 75 Easy Steps

抽象题，当时没听懂

### Parking

喵了个喵（幻视

首先对于已匹配的对，我们可以直接删去，所以要是能直接匹配肯定是最优的。

模拟即可

### Bring Down the ~~Sky~~ Grading Server

博弈

首先由于 $S\ge 1$，因此「摧毁防火墙」的操作肯定会比较优，但是一直憋发大的结果被别人偷塔了就搞笑了。

结论：「攻击」操作双方至多进行一次，且交手之后决出胜负。

进一步观察：如果别人 $c$ 也比你强 $f$ 也比你强凭什么不赢你，因此如果黑客方占绝对优势可以直接知道答案。

## @Beijing Day4

### Wells

给定一棵包含 $𝑁$ 个节点的树和一个正整数 $𝐾$。
判断是否存在一个节点子集 $𝑆$，使得树中任意包含恰好 $𝐾$ 个节点的路径上，都有且仅有一个节点属于 $𝑆$。

另外，请计算满足条件的节点子集数量（模 $10^9+7$）。

其实条件可以用距离刻画为：

- 任意两个 $S$ 中的点的距离都为 $K$
- 任意一个点到 $S$ 的最短距离都不超过 $K$