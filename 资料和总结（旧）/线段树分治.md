# 线段树分治

常用于各种带撤销操作的修改-查询题目中。

就是利用线段树的思想，把修改的持续时间拆成若干个整齐的线段。

每个线段树节点用一个stack来记录它所有的操作。

然后对某个时刻的查询就变成了单点查询，执行他沿路上的所有操作即可。

例题[二分图 /【模板】线段树分治](https://www.luogu.com.cn/problem/P5787)

此题使用可撤销拓展域并查集维护是否是二分图。

但是，如果我们打算线性地维护这个东西，我们很快就会发现问题——可撤销并查集不能做到撤销操作后快速知道它是不是二分图。

对此，我们使用线段树分治。另，此题直接问的是每个时刻的状态，我们可以直接像深搜一样遍历线段树得到答案。

```c++
#include<cstdio>
#include<vector>
using std::vector;
const int N=1e5+10;
vector<int> t[N*3];
struct pair{int x,y;}e[N];
void update(int l,int r)
{
}
int main()
{
	int n,m,k;
	scanf("%d%d%d",&n,&m,&k);
	while(m--)
	{
		int l,r;scanf("%d%d%d",&e[i].x,&e[i].y,&l,&r);
		update(l+1,r,i);//因为输入的时间是从零开始的
	}
}
```

